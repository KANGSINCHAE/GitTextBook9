# 1. 되돌리기
- 깃을 이용하여 버전을 관리하는 목적은 만일의 사태를 대비하기 위해서임
- 개발자는 코드를 단계별로 발전 시키면서 실수를 최소화하고자 노력해야함
- 아무리 주의해서 프로그래밍해도 오류가 생길수 있음
- 억지로 문제를 해결하는 것 보다는 작업을 포기하고 다시 시작하는 것이 더 빠를 수 있음
- 깃으로는 원하는 시점으로 언제든지 전체 코드를 되돌릴 수 있음

### 1-1. 다시 시작
- 몇 줄만 암기하여 코드를 다시 변경하면 되지만, 몇 시간 혹은 며칠동안 작업한 코드라면 이야기가 다름
- 모든 수정내역을 일일히 기억하여 과거로 돌아가는 것은 불가능에 가까움
- 깃을 사용하면 기록된 커밋을 이전 상태로 되돌릴 수 있음
- 코드를 되돌리는 방법에는 reset, revert가 있음  
[실습 사진 첨부(깃 저장소 생성 후 menu.htm 추가 및 커밋)]
[실습 사진 첨부(menu 추가 후 커밋(1,2,3,4,5 를 각각 추가 및 커밋 후 작업))]
[소스트리 사진 첨부(선택)]

# 2. 리셋
- 리셋은 커밋을 기준으로 이전 코드로 되돌리는 방법으로, 기록된 커밋을 취소함
- 커밋을 취소하는 만큼 리셋 시 신중해야함

### 2-1. 복귀 시점
- 이전 코드로 복귀하려면 복귀 시점을 알려줘야 함
- log 명령어로 커밋 해시값을 확인 후 복귀하고자 하는 커밋의 해시값을 넣어 주면 됨  
[실습 사진 첨부(git log --oneline)]
- HEAD 포인터를 사용하여 되돌아갈 수도 있음
- 예시는 git reset --hard HEAD~3 처럼 사용

### 2-2. reset 명령어
- 지정된 커밋 코드로 되돌아감
- 형식은 git reset [옵션] [커밋ID]이다.
- 옵션에는 아래 세 가지가 존재함.
- soft : 스테이지 영역을 포함한 상태로 복원
- mixed : 기본은 mixed임.
- hard : 실제 파일이 삭제된 이전 상태로 복원

### 2-3. soft 옵션
- 가장 낮은 단계의 리셋 동작  
[실습 사진 첨부(git reset --soft)]
[소스트리 사진 첨부(선택)]
[실습 사진 첨부(log --oneline 및 code로 파일 내용 확인)]
[실습 사진 첨부(diff 명령 및 status 결과값)]
- soft옵션은 파일을 수정하고 add 명령어로 스테이지 영역에 올려 커밋을 실행하기 직전의 단계로 되돌림
- 단순히 HEAD 위치를 이동하는 역할만 함
- checkout 명령어와 HEAD를 이동한다는 점은 동일하나, soft옵션은 브랜치를 이동하진 않음
[실습 사진 첨부(menu5 등록 후 커밋)]
- 소스코드의 내용이 변경되지 않더라도 새로 커밋하면 변경된 시간값을 적용하여 해시 값을 생성함.
[실습 사진 첨부(log --oneline)]

### 2-4. mixed 옵션
- reset 명령어의 기본값은 mixed 옵션이나 옵션을 생략해서 사용해도됨  
[실습 사진 첨부(git reset --mixed 및 status, code로 파일 내용 확인)]
[실습 사진 첨부(diff 확인)]
[실습 사진 첨부(등록 후 실패확인, add후 다시 커밋)]

### 2-5. hard 옵션
- 가장 강력한 옵션이고, 모든 작업 내용이 실제로 삭제됨
- 그렇기 때문에 hard옵션은 주의해서 사용해야 함  
[실습 사진 첨부(reset --hard)]
[소스트리 사진 첨부(선택)]
[실습 사진 첨부(log 확인 후 파일 내용 확인 및 status)]

### 2-6. 소스트리
- 매번 로그를 검색하여 리셋하는 것은 불편
- 소스트리 커밋 그래프에서 복귀할 커밋 선택 후 우클릭하여 이 커밋까지 현재 브랜치 초기화 메뉴 선택  
[메뉴 선택 사진 첨부]
- 팝업창에서 soft, mixed, hard 옵션 중 선택  
[팝업 창 첨부]
- 정말 되돌릴거면 예 클릭  
[경고메시지 사진 첨부]

### 2-7. 커밋 합치기
- rebase에서 -i 옵션으로 커밋을 하나로 합치는 동작 수행할 수 있었음
- 단일 커밋은 --amend 옵션으로 수정할 수 있음.
- 동작 원리를 이해하면 커밋도 수정 가능  
[실습 사진 첨부(log --oneline)]
[실습 사진 첨부(reset --soft 후 log --oneline)]
[실습 사진 첨부(diff 확인)]
[소스트리 사진 첨부]
[실습 사진 첨부(commit)]
[소스트리 사진 첨부]

### 2-8. 스테이지 리셋
- 스테이지에 등록할 때에는 add를 사용해왔음
- 등록 된 파일을 다시 unstage 상태로 만들 때는 reset명령어 사용
- 기본 형태에는 --mixed 옵션이랑 HEAD가 축약되어 있음
- HEAD대신 커밋 ID를 사용해도 괜찮음

### 2-9. 작업 취소
- 수정 중 오류가 생겨 모두 취소하고 싶을 때가 있음
- 워킹 디렉터리에서 코드 수정하고 스테이지에 다시 등록함
- 수정을 완전히 취소하려면 워킹 디렉터리와 스테이지 상태를 모두 제거하여 마지막 커밋 상태로 되돌려 놓아야 함
- reset --hard를 이용하여 모두 삭제 처리해야 함

### 2-10. 병합 취소
- 병합된 브랜치도 취소할 수 있음.  
[실습 사진 첨부(menu 브랜치 생성 및 이동)]
[실습 사진 첨부(파일 수정 후 커밋)]
[소스트리 사진첨부]
[실습 사진 첨부(merge 실행)]
[소스트리 사진 첨부]
[실습 사진 첨부(reset --merge 실행)]
[소스트리 사진 첨부]

### 2-11. 주의할 점
- 저장소를 외부에 공개했거나 공유하고 있다면 주의해야 함
- 함께 작업하는 개발자에게 혼란을 줄 수 있음
- 일반적으론 공개 커밋에 대해 리셋 작업을 하지 않음

# 3. 리버트
- 공개 커밋을 되돌리기 위해서 하는 작업
- 커밋 정보 삭제 여부에 차이가 있음

### 3-1. 취소 커밋
- 리버트는 기존 커밋을 남겨 두고 취소에 대한 새로운 커밋을 생성함
- 취소 커밋 생성할 때에는 revert 명령어 사용
- 삭제를 위한 새로운 커밋을 생성함
[실습 사진 첨부(파일 수정 후 커밋)]
[소스트리 사진 첨부]
[실습 사진 첨부(revert 명령 실행 및 메시지 입력, 파일 내용 확인)]
[소스트리 사진 첨부]

### 3-2. 리버트 지정
- 리버트는 한 번에 커밋 하나만 취소 가능
- 범위 지정 연산자를 사용하여 여러 커밋을 revert 할 수 있음
- 사용 예시는 git revert CommitID .. CommitID와 같이 사용

### 3-3. 소스트리에서 리버트
- 해당 커밋을 선택한 후 마우스 오른쪽 버튼을 클릭하고 커밋 되돌리기 메뉴 선택
[메뉴 사진 첨부]
[사진 첨부(되돌릴것인지 묻고 예 선택)]

### 3-4. 병합 취소
- 병합한 커밋을 revert를 이용하여 취소할 수 있음
- 리셋은 방금 실행한 병합만 삭제하나 리버트는 시간 지난 후 과거의 병합을 선택하여 취소할 수 있음
[실습 사진 첨부(브랜치 병합 및 파일 내용 수정 후 커밋)]
[소스트리 사진 첨부]
- 병합 취소할 때에는 --mainline 옵션을 사용할 수 있음
- 병합을 취소한 후 체크아웃 되는 브랜치를 표시하며 체크아웃으로 되돌아가는 커밋 번호를 의미함.
[실습 사진 첨부(log --oneline --graph)]
[실습 사진 첨부(revert --mainline)]
[소스트리 사진 첨부]
[실습 사진 첨부(파일 내용 확인)]

### 3-5. 리버트 히스토리
- 새 커밋이 추가되기에 커밋 이력이 복잡해짐
- 그럼에도 불구하고 저장소가 공개되었다면 리셋보단 리버트가 유용함








